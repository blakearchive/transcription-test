<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://www.blakearchive.org/static/fonts/Lato/lato.css">
    <link rel="stylesheet" href="http://www.blakearchive.org/static/css/styles.css">
    <link rel="stylesheet" href="http://www.blakearchive.org/static/css/override.css">
    <link rel="stylesheet" href="http://www.blakearchive.org/static/css/tei.css">
    <base href="/">
    <link rel="icon" href="http://www.blakearchive.org/static/img/favicon.ico" type="image/x-icon">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <h1 style="color:#eee; text-align: center;">Displomatic Transcription Test</h1>
                <div style="margin: 0 auto; width: 80%;">
                    <form class="form" action="/" method="post">
                        <textarea name="xml" rows="12" class="form-control">{{xmlInput}}</textarea>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </form>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                <div class="tei-wrapper" id="tei-wrapper">
                </div>
            </div>
        </div>
    </div>
    <div class="hidden" id="tei-raw">
        {{ xml }}
    </div>
</body>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<script>
    $(function(){
        var escaped = $('#tei-raw').html();
        var html = escaped
            .replace(new RegExp('&lt;','g'),'<')
            .replace(new RegExp('&gt;','g'),'>')
	    .replace(new RegExp('&amp;', 'g'), '&');
            //.replace(new RegExp('&amp;#160;','g'),'&nbsp;');
        console.log(html);
       $('#tei-wrapper').html(html);
    });
</script>
</html>
